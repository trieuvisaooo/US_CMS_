<link rel="stylesheet" href="resources/css/mem-info.css">
<div id="main-frame" class="container-fluid rounded my-2 py-3">

    <div class="row p-4 ">
        <div class = "col-3">

            <div >

                {{#if mem.AVATAR}}
                    <img src="{{mem.AVATAR}}" id="user-img" class="rounded col-2 me-3 w-75" alt="...">
                {{else}}
                    <img src="./resources/img/mem-info/user-image.png" id="user-img" class="rounded col-2 me-3 w-75" alt="...">
                {{/if}}

            </div>

            <form action = "/business/updateUserInfo/change_avatar-{{mem.MSSV}}" method="post" enctype="multipart/form-data">
                <div class="input-group bg-light w-75 my-2">
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" name="new_avatar" id="inputGroupFile04">
                    </div>
                </div>
                <div class="input-group-append text-center my-2 w-75">
                    <button type="submit" class="btn btn mb-2 text-light rounded-pill" style="background:#008170">THAY ĐỔI</button>
                </div>
            </form>

        </div>

        <div  class="user-info col rounded">
            <div class="d-flex justify-content-center">
                <form class="col" action="/business/updateUserInfo/apply_changes-{{mem.MSSV}}" method="post">
                    <div class="col">
                        <div class="info_1 row">
                            <div class="col p-4">

                                <div>
                                    <div class="d-flex ms-2 justify-content-center">
                                        <h3 class="fw-bold ms-5">THAY ĐỔI THÔNG TIN</h3>
                                    </div>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend w-25">
                                            <span class="input-group-text fw-bold bg-transparent text-light" style="border: none" id="basic-addon1">Họ tên</span>
                                        </div>
                                        <input required  name="new_name" type="text" class="form-control" value="{{mem.HOTEN}}" placeholder="..." aria-label="Username" >
                                    </div>

                                    <div>
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend w-25">
                                                <span class="input-group-text fw-bold bg-transparent text-light" style="border: none" id="basic-addon1">Lớp</span>
                                            </div>
                                            <input required name="new_class" type="text" class="form-control" value="{{mem.LOP}}" placeholder="..." aria-label="Username" >
                                        </div>
                                    </div>
                                    <div>
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend w-25">
                                                <span class="input-group-text fw-bold bg-transparent text-light" style="border: none" id="basic-addon1">SĐT</span>
                                            </div>
                                            <input required name="new_phone" type="text" value="{{mem.SDT}}" maxlength="10" minlength="10" class="form-control" placeholder="..." aria-label="Username" >
                                        </div>
                                    </div>
                                    <div>
                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend w-25">
                                                <span class="input-group-text fw-bold bg-transparent text-light" style="border: none">Ngày sinh</span>
                                            </div>
                                            <input required name="new_birthday" type="date" class="form-control" value="{{mem.NGAYSINH}}"  >
                                        </div>
                                    </div>

                                    <div>
                                        <div class="input-group">
                                            <div class="input-group-prepend w-25">
                                                <span class="input-group-text fw-bold bg-transparent text-light" style="border: none">Email</span>
                                            </div>
                                            <input required name="new_email" type="text" class="form-control" value="{{mem.EMAIL}}"  >
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                        <div class="d-flex justify-content-center">
                            <button type="submit" class="btn btn mb-5 ms-5 text-light rounded-pill" style="background:#008170">
                               CẬP NHẬT
                            </button>
                        </div>
                </form>

                <form class="col ms-5" action="/business/updateUserInfo/update_password?user_id={{mem.MSSV}}" method="post">
                    <div class="col">
                        <div class="info_1 row">
                            <div class="col p-4">

                                <div>
                                    <div class="d-flex ms-2 justify-content-center">
                                        <h3 class="fw-bold ms-5">THAY ĐỔI MẬT KHẨU</h3>
                                    </div>

                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend w-25">
                                            <span class="input-group-text fw-bold bg-transparent text-light" style="border: none" id="basic-addon1">Mật khẩu cũ</span>
                                        </div>
                                        <input required name="old_pass" type="password" class="form-control"  placeholder="..." aria-label="Username" >
                                    </div>


                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend w-25">
                                            <span class="input-group-text fw-bold bg-transparent text-light" style="border: none" id="basic-addon1">Mật khẩu mới</span>
                                        </div>
                                        <input required name="new_pass" type="password" class="form-control"  placeholder="..." aria-label="Username" >
                                    </div>

                                    <div>

                                        <div class="input-group ">
                                            <div class="input-group-prepend w-25">
                                                <span class="input-group-text fw-bold bg-transparent text-light" style="border: none" id="basic-addon1">Nhập lại</span>
                                            </div>
                                            <input required name="verify_pass" type="password" class="form-control"  placeholder="..." aria-label="Username" >
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="notification d-flex justify-content-center ms-5">
                        {{#if success}}
                        <div class="alert alert-success d-flex align-items-center" role="alert">
                            <svg class="bi flex-shrink-0" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                            <div>
                                Đổi mật khẩu thành công
                            </div>
                            <button type="button" class="btn-close ms-2" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        {{/if}}

                        {{#if fail_old_pass}}
                        <div class="alert alert-danger d-flex align-items-center" role="alert">
                            <svg class="bi flex-shrink-0" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                            <div>
                                LỖI: Sai mật khẩu cũ!
                            </div>
                            <button type="button" class="btn-close ms-2" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        {{/if}}

                        {{#if fail_verify}}
                        <div class="alert alert-danger d-flex align-items-center" role="alert">
                            <svg class="bi flex-shrink-0" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                            <div>
                                LỖI: Mật khẩu mới chưa khớp!
                            </div>
                            <button type="button" class="btn-close ms-2" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        {{/if}}

                    </div>


                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn mb-5 ms-5 text-light rounded-pill" style="background:#008170">
                            CẬP NHẬT
                        </button>
                    </div>



                </form>
            </div>
        </div>
    </div>
</div>
